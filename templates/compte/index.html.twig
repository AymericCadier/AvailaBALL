<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profil</title>

    {% block stylesheets %}
        <link rel="stylesheet" href="{{ asset('styles/css/profil.css') }}">
    {% endblock %}


</head>

{% block body %}
    <div class="d-flex flex-row">
        {% include 'base.html.twig' %}

        <div class="flex-grow-1 main-body">

            {% if app.user %}
                <div class="container">
                    <div>
                        <h2>Informations utilisateur</h2>
                        <p>Prénom : {{ app.user.fname }}</p>
                        <p>Nom de famille : {{ app.user.lname }}</p>
                        <p>Nom d'utilisateur : {{ app.user.nickname }}</p>
                        <p>Email : {{ app.user.email }}</p>
                        <p>Date de création : {{ app.user.createdAt|date('Y-m-d H:i:s') }}</p>
                        {% if 'ROLE_ADMIN' in app.user.roles %}
                        <p>Rôle : Admin </p>
                            {% else %}
                        <p>Rôle : Utilisateur </p>
                        {% endif %}
                        <hr>
                        <h2>Statistiques</h2>
                        {% if userSessions is empty %}
                            <p>Aucune session trouvée.</p>
                        {% else %}
                            <div class="sessions">
                            <table>
                                <thead>
                                <tr>
                                    <th>Date</th>
                                    <th>Heure de début</th>
                                    <th>Heure de fin</th>
                                    <th>Terrain</th>
                                </tr>
                                </thead>
                                <tbody>
                                {% for session in userSessions %}
                                    <tr>
                                        <td>{{ session.date|date('Y-m-d') }}</td>
                                        <td>{{ session.beginHour|date('H:i') }}</td>
                                        <td>{% if session.endHour %}{{ session.endHour|date('H:i') }}{% else %}En cours{% endif %}</td>
                                        <td>{{ session.idPlayground.name }}</td>
                                    </tr>
                                {% endfor %}
                                </tbody>
                            </table>
                            </div>
                        {% endif %}
                    </div>
                    <li>
                        <button type="submit" class="btn btn-primary mt-3"><a href="{{ path('app_account_update') }}"
                                                                              style="color: white">Modifier le compte</a>
                        </button>
                    </li>
                    <li>
                        <button type="submit" class="btn btn-primary mt-3"><a href="{{ path('app_account_delete') }}"
                                                                              style="color: white">Supprimer le compte</a>
                        </button>
                    </li>
                </div>

            {% endif %}
        </div>
    </div>
{% endblock %}

